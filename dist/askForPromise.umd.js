!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).askForPromise=n()}(this,(function(){"use strict";function e(e){let t,i=!1;return e?(t=function(e){let t=e.map((e=>n())),i=t.map((e=>e.promise));return t.promises=i,t.onComplete=o(Promise.all(i)),t}(e),i=!0):t=n(),t.timeout=function(e,n){let t;t=e?Promise.all(n.promises):n.promise;return function(e,i){let r,u=new Promise(((n,o)=>{r=setTimeout((()=>{n(i),Promise.resolve(t)}),e)}));return t.then((()=>clearTimeout(r))),n.onComplete=o(Promise.race([t,u])),n}}(i,t),t}function n(){let e,n;const t=new Promise(((o,t)=>{e=o,n=t}));return{promise:t,done:e,cancel:n,onComplete:o(t)}}function o(e){return function(n){e.then((e=>n(e)))}}return e.sequence=function(n,...o){const t=e(),i=[];const r=function*(e){for(const n of e)yield n}(n);return function e(n,...o){n.done?t.done(i):n.value(...o).then((n=>{i.push(n),e(r.next(),...o,n)}))}(r.next(),...o),t},e.all=function(n,...o){const t=e(),i=[],r=n.map(((e,n)=>"function"==typeof e?e(...o).then((e=>i[n]=e)):e.then((e=>i[n]=e))));return Promise.all(r).then((()=>t.done(i))),t},e}));
